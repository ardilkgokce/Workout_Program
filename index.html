<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Fatih Fitness">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0a0a0f">
    <title>Fatih Fitness ğŸ’ª</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --accent: #ff6b35;
            --accent2: #f7c59f;
            --text: #ffffff;
            --text2: #a0a0b0;
            --text3: #606070;
            --success: #4ade80;
            --grad: linear-gradient(135deg, #ff6b35 0%, #f7c59f 100%);
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }
        * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
        html { -webkit-overflow-scrolling:touch; }
        body {
            font-family: 'Outfit', -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            padding: calc(15px + var(--safe-top)) 15px calc(15px + var(--safe-bottom));
        }
        .header { text-align:center; padding:20px 0 25px; border-bottom:2px solid var(--accent); margin-bottom:20px; }
        .header h1 { font-family:'Bebas Neue',sans-serif; font-size:clamp(2rem,8vw,3.5rem); background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .header .sub { color:var(--text2); font-size:0.95rem; margin-top:5px; }
        .header .badge { display:inline-block; margin-top:10px; padding:6px 14px; background:rgba(255,107,53,0.15); border:1px solid var(--accent); border-radius:50px; font-size:0.8rem; color:var(--accent); }
        
        .stats { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-bottom:20px; }
        @media(min-width:500px) { .stats { grid-template-columns:repeat(4,1fr); } }
        .stat { background:var(--bg-card); border-radius:12px; padding:12px 8px; text-align:center; border:1px solid rgba(255,255,255,0.05); }
        .stat .icon { font-size:1.3rem; }
        .stat .val { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; color:var(--accent); }
        .stat .lbl { font-size:0.65rem; color:var(--text3); text-transform:uppercase; letter-spacing:1px; }
        
        .water { background:linear-gradient(135deg,#0c4a6e,#164e63); border-radius:16px; padding:15px; margin-bottom:20px; }
        .water h3 { font-size:0.95rem; margin-bottom:10px; }
        .water-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:5px; margin-bottom:10px; }
        .glass { aspect-ratio:0.75; background:rgba(255,255,255,0.1); border:2px solid rgba(56,189,248,0.4); border-radius:0 0 8px 8px; position:relative; overflow:hidden; cursor:pointer; }
        .glass::before { content:''; position:absolute; bottom:0; left:0; right:0; height:0; background:linear-gradient(180deg,#38bdf8,#0ea5e9); transition:height 0.3s; }
        .glass.filled::before { height:100%; }
        .glass:active { transform:scale(0.93); }
        .water-info { display:flex; justify-content:space-between; font-size:0.85rem; color:rgba(255,255,255,0.8); }
        .water-info .amt { font-family:'Bebas Neue',sans-serif; font-size:1.2rem; color:#38bdf8; }
        
        .tabs { display:flex; gap:6px; overflow-x:auto; padding-bottom:8px; margin-bottom:15px; scrollbar-width:none; }
        .tabs::-webkit-scrollbar { display:none; }
        .tab { padding:8px 12px; background:var(--bg-card); border:1px solid rgba(255,255,255,0.08); border-radius:10px; color:var(--text2); font-size:0.75rem; font-weight:500; cursor:pointer; white-space:nowrap; flex-shrink:0; font-family:'Outfit',sans-serif; display:flex; align-items:center; gap:4px; }
        .tab:active { transform:scale(0.95); }
        .tab.active { background:var(--grad); color:#fff; border-color:transparent; }
        .tab .tab-icon { font-size:0.9rem; }
        .tab.rest-tab { opacity:0.7; }
        .tab.rest-tab.active { opacity:1; background:linear-gradient(135deg,#1e1e2e,#2a2a3a); }
        
        .day { display:none; }
        .day.active { display:block; animation:fadeIn 0.3s; }
        @keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }
        
        .day-head { display:flex; align-items:center; gap:12px; margin-bottom:15px; }
        .day-icon { width:45px; height:45px; background:var(--grad); border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:1.3rem; }
        .day-title { font-family:'Bebas Neue',sans-serif; font-size:1.3rem; letter-spacing:1px; }
        .day-sub { color:var(--text3); font-size:0.8rem; }
        
        .exlist { display:flex; flex-direction:column; gap:10px; }
        .excard { background:var(--bg-card); border-radius:12px; padding:14px; border:1px solid rgba(255,255,255,0.05); }
        .excard.done { border-color:var(--success); background:rgba(74,222,128,0.05); }
        .exhead { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:8px; gap:8px; }
        .exname { font-size:0.95rem; font-weight:600; display:flex; gap:8px; flex:1; }
        .exname .num { width:22px; height:22px; background:var(--grad); border-radius:5px; display:flex; align-items:center; justify-content:center; font-size:0.7rem; font-weight:700; flex-shrink:0; }
        .exname .sub { font-size:0.7rem; color:var(--text3); font-weight:400; display:block; margin-top:2px; }
        .exsets { background:rgba(255,107,53,0.15); padding:4px 10px; border-radius:12px; font-size:0.7rem; color:var(--accent); font-weight:500; white-space:nowrap; }
        .extip { background:rgba(255,255,255,0.03); padding:8px 10px; border-radius:6px; font-size:0.75rem; color:var(--text2); margin-bottom:10px; border-left:3px solid var(--accent); }
        .settrack { display:flex; gap:8px; flex-wrap:wrap; }
        .setbtn { width:40px; height:40px; background:rgba(255,255,255,0.05); border:2px solid rgba(255,255,255,0.1); border-radius:8px; color:var(--text3); font-family:'Bebas Neue',sans-serif; font-size:1rem; cursor:pointer; display:flex; align-items:center; justify-content:center; }
        .setbtn:active { transform:scale(0.9); }
        .setbtn.done { background:var(--grad); border-color:transparent; color:#fff; }
        
        .rest { background:linear-gradient(135deg,#1e1e2e,#2a2a3a); border-radius:16px; padding:35px 20px; text-align:center; }
        .rest .icon { font-size:2.5rem; margin-bottom:12px; }
        .rest h3 { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; letter-spacing:2px; margin-bottom:10px; }
        .rest p { color:var(--text2); font-size:0.85rem; max-width:300px; margin:0 auto 20px; }
        .restlist { display:flex; flex-direction:column; gap:8px; max-width:280px; margin:0 auto; }
        .restitem { background:rgba(255,255,255,0.05); padding:10px 14px; border-radius:10px; display:flex; align-items:center; gap:10px; cursor:pointer; border:1px solid transparent; }
        .restitem:active { transform:scale(0.98); }
        .restitem.checked { border-color:var(--success); background:rgba(74,222,128,0.1); }
        .restitem .chk { width:20px; height:20px; border:2px solid var(--text3); border-radius:5px; display:flex; align-items:center; justify-content:center; font-size:0.7rem; }
        .restitem.checked .chk { background:var(--success); border-color:var(--success); }
        
        .section { margin-top:25px; }
        .sectitle { font-family:'Bebas Neue',sans-serif; font-size:1.2rem; letter-spacing:1px; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
        
        .nutgrid { display:flex; flex-direction:column; gap:10px; }
        @media(min-width:600px) { .nutgrid { display:grid; grid-template-columns:repeat(3,1fr); } }
        .nutcard { background:var(--bg-card); border-radius:12px; padding:15px; }
        .nutcard h4 { font-size:0.9rem; margin-bottom:8px; }
        .nutcard .desc { font-size:0.75rem; color:var(--text3); }
        .macrobar { height:6px; background:rgba(255,255,255,0.1); border-radius:3px; margin:10px 0 6px; overflow:hidden; }
        .macrofill { height:100%; border-radius:3px; transition:width 0.4s; }
        .macrofill.protein { background:linear-gradient(90deg,#ef4444,#f87171); }
        .macrofill.carbs { background:linear-gradient(90deg,#f59e0b,#fbbf24); }
        .macrofill.water { background:linear-gradient(90deg,#0ea5e9,#38bdf8); }
        .macroinfo { display:flex; justify-content:space-between; font-size:0.75rem; color:var(--text3); }
        .foods { display:flex; flex-wrap:wrap; gap:5px; margin-top:8px; }
        .foodtag { background:rgba(255,255,255,0.05); padding:4px 8px; border-radius:12px; font-size:0.7rem; color:var(--text2); }
        
        .supps { display:flex; flex-direction:column; gap:10px; }
        @media(min-width:500px) { .supps { display:grid; grid-template-columns:repeat(2,1fr); } }
        .suppcard { background:var(--bg-card); border-radius:12px; padding:15px; display:flex; align-items:center; gap:12px; cursor:pointer; border:1px solid rgba(255,255,255,0.05); }
        .suppcard:active { transform:scale(0.98); }
        .suppcard.taken { border-color:var(--success); background:rgba(74,222,128,0.05); }
        .suppicon { width:45px; height:45px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:1.3rem; flex-shrink:0; }
        .suppicon.cr { background:linear-gradient(135deg,#8b5cf6,#a78bfa); }
        .suppicon.pr { background:linear-gradient(135deg,#ec4899,#f472b6); }
        .suppinfo { flex:1; }
        .suppinfo h4 { font-size:0.9rem; margin-bottom:3px; }
        .suppinfo p { font-size:0.75rem; color:var(--text3); }
        .suppchk { width:24px; height:24px; border:2px solid var(--text3); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.7rem; }
        .suppcard.taken .suppchk { background:var(--success); border-color:var(--success); }
        
        .tipcard { background:var(--bg-card); border-radius:12px; padding:15px; margin-bottom:10px; border-left:4px solid var(--accent); }
        .tipcard h4 { font-size:0.9rem; color:var(--accent); margin-bottom:8px; }
        .tipcard p { font-size:0.8rem; color:var(--text2); line-height:1.5; }
        .tipcard ul { margin-top:6px; padding-left:16px; }
        .tipcard li { font-size:0.8rem; color:var(--text2); margin-bottom:5px; }
        
        .aesthetic { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:15px; }
        @media(max-width:400px) { .aesthetic { grid-template-columns:1fr; } }
        .aescard { background:var(--bg-card); border-radius:12px; padding:15px 10px; text-align:center; }
        .aescard .emoji { font-size:1.8rem; margin-bottom:8px; }
        .aescard h4 { font-family:'Bebas Neue',sans-serif; font-size:0.9rem; margin-bottom:4px; }
        .aescard p { font-size:0.7rem; color:var(--text3); }
        
        .progress { margin-top:20px; padding:18px 12px; background:linear-gradient(135deg,rgba(255,107,53,0.1),rgba(247,197,159,0.05)); border-radius:16px; border:1px solid rgba(255,107,53,0.2); }
        .progress h3 { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; margin-bottom:12px; }
        .week-nav { display:flex; align-items:center; justify-content:space-between; margin-bottom:15px; gap:10px; }
        .week-nav button { width:40px; height:40px; background:var(--bg-card); border:1px solid rgba(255,255,255,0.1); border-radius:10px; color:var(--text); font-size:1.2rem; cursor:pointer; display:flex; align-items:center; justify-content:center; }
        .week-nav button:disabled { opacity:0.3; cursor:not-allowed; }
        .week-nav button:not(:disabled):active { transform:scale(0.95); background:var(--accent); }
        .week-info { text-align:center; flex:1; }
        .week-info .week-num { font-family:'Bebas Neue',sans-serif; font-size:1.5rem; color:var(--accent); }
        .week-info .week-dates { font-size:0.75rem; color:var(--text3); margin-top:2px; }
        .week-progress { background:rgba(255,255,255,0.1); height:8px; border-radius:4px; margin-bottom:15px; overflow:hidden; }
        .week-progress-fill { height:100%; background:var(--grad); border-radius:4px; transition:width 0.4s; }
        .week-progress-text { text-align:center; font-size:0.8rem; color:var(--text2); margin-bottom:15px; }
        .calgrid { display:grid; grid-template-columns:repeat(7,1fr); gap:6px; }
        .calday { aspect-ratio:1; background:rgba(255,255,255,0.03); border-radius:10px; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:0.6rem; color:var(--text3); cursor:pointer; border:2px solid transparent; min-height:44px; transition:all 0.2s; }
        .calday:active { transform:scale(0.95); }
        .calday .dn { font-size:0.55rem; text-transform:uppercase; letter-spacing:0.5px; }
        .calday .dd { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; color:var(--text); }
        .calday.today { border-color:var(--accent); background:rgba(255,107,53,0.15); }
        .calday.done { background:rgba(74,222,128,0.15); border-color:var(--success); }
        .calday.done .dd { color:var(--success); }
        .calday.future { opacity:0.5; }
        .calday .check { font-size:0.7rem; color:var(--success); margin-top:1px; }
        
        .motiv { margin-top:25px; padding:25px 15px; background:var(--grad); border-radius:16px; text-align:center; }
        .motiv p { font-family:'Bebas Neue',sans-serif; font-size:clamp(1.1rem,4vw,1.5rem); letter-spacing:2px; }
        .motiv .auth { font-family:'Outfit',sans-serif; font-size:0.8rem; margin-top:10px; opacity:0.8; }
        
        .footer { text-align:center; padding:25px 0 10px; color:var(--text3); font-size:0.75rem; }
        
        .toast { position:fixed; bottom:calc(25px + var(--safe-bottom)); left:50%; transform:translateX(-50%) translateY(80px); background:var(--bg-card); padding:10px 20px; border-radius:30px; border:1px solid var(--success); box-shadow:0 10px 30px rgba(0,0,0,0.4); display:flex; align-items:center; gap:8px; z-index:999; opacity:0; transition:all 0.3s; font-size:0.85rem; }
        .toast.show { transform:translateX(-50%) translateY(0); opacity:1; }
        
        button, .setbtn, .glass, .restitem, .suppcard, .calday { -webkit-user-select:none; user-select:none; }
        @supports (-webkit-touch-callout:none) { body { min-height:-webkit-fill-available; } }

        /* Settings */
        .settings-btn { position:absolute; top:20px; right:15px; width:40px; height:40px; background:var(--bg-card); border:1px solid rgba(255,255,255,0.1); border-radius:10px; font-size:1.2rem; cursor:pointer; display:flex; align-items:center; justify-content:center; }
        .settings-btn:active { transform:scale(0.95); background:var(--accent); }
        .header { position:relative; }

        .modal-overlay { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.8); z-index:1000; display:none; align-items:center; justify-content:center; padding:20px; }
        .modal-overlay.show { display:flex; }
        .modal { background:var(--bg-card); border-radius:16px; padding:20px; max-width:400px; width:100%; max-height:90vh; overflow-y:auto; animation:fadeIn 0.3s; }
        .modal h2 { font-family:'Bebas Neue',sans-serif; font-size:1.5rem; margin-bottom:20px; display:flex; align-items:center; gap:10px; }
        .modal-close { margin-left:auto; width:32px; height:32px; background:rgba(255,255,255,0.1); border:none; border-radius:8px; color:var(--text); font-size:1.2rem; cursor:pointer; display:flex; align-items:center; justify-content:center; }
        .modal-close:active { background:var(--accent); }

        .day-selector { display:flex; flex-direction:column; gap:8px; }
        .day-selector-item { display:flex; align-items:center; gap:12px; padding:12px; background:rgba(255,255,255,0.03); border-radius:10px; cursor:pointer; border:2px solid transparent; transition:all 0.2s; }
        .day-selector-item:active { transform:scale(0.98); }
        .day-selector-item.selected { border-color:var(--accent); background:rgba(255,107,53,0.1); }
        .day-selector-item .day-check { width:24px; height:24px; border:2px solid var(--text3); border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:0.8rem; flex-shrink:0; }
        .day-selector-item.selected .day-check { background:var(--accent); border-color:var(--accent); }
        .day-selector-item .day-name { font-weight:500; }
        .day-selector-item .day-workout { font-size:0.75rem; color:var(--text3); }

        .modal-section { margin-top:20px; }
        .modal-section h3 { font-size:0.9rem; color:var(--text2); margin-bottom:10px; }
        .workout-order { display:flex; flex-direction:column; gap:6px; }
        .workout-order-item { display:flex; align-items:center; gap:10px; padding:10px 12px; background:rgba(255,255,255,0.03); border-radius:8px; font-size:0.85rem; }
        .workout-order-item .order-num { width:24px; height:24px; background:var(--grad); border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:0.75rem; font-weight:700; flex-shrink:0; }
        .workout-order-item .order-icon { font-size:1.1rem; }

        .modal-actions { margin-top:20px; display:flex; gap:10px; }
        .modal-actions button { flex:1; padding:12px; border-radius:10px; font-family:'Outfit',sans-serif; font-size:0.9rem; font-weight:500; cursor:pointer; border:none; }
        .btn-save { background:var(--grad); color:#fff; }
        .btn-save:active { transform:scale(0.98); }
        .btn-cancel { background:rgba(255,255,255,0.1); color:var(--text); }

        .date-picker-container { margin-top:10px; }
        .date-input { width:100%; padding:12px; background:rgba(255,255,255,0.05); border:2px solid rgba(255,255,255,0.1); border-radius:10px; color:var(--text); font-family:'Outfit',sans-serif; font-size:0.95rem; cursor:pointer; }
        .date-input:focus { outline:none; border-color:var(--accent); }
        .date-input::-webkit-calendar-picker-indicator { filter:invert(1); cursor:pointer; }
        .date-info { font-size:0.75rem; color:var(--text3); margin-top:8px; }

        /* Weight Input */
        .weight-input { display:flex; align-items:center; gap:6px; margin-top:8px; padding-top:8px; border-top:1px solid rgba(255,255,255,0.05); }
        .weight-input label { font-size:0.7rem; color:var(--text3); }
        .weight-input input { width:60px; padding:6px 8px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:6px; color:var(--text); font-family:'Outfit',sans-serif; font-size:0.85rem; text-align:center; }
        .weight-input input:focus { outline:none; border-color:var(--accent); }
        .weight-input span { font-size:0.75rem; color:var(--text3); }
        .weight-change { font-size:0.7rem; margin-left:auto; padding:3px 8px; border-radius:10px; }
        .weight-change.up { background:rgba(74,222,128,0.2); color:var(--success); }
        .weight-change.down { background:rgba(239,68,68,0.2); color:#ef4444; }

        /* Timer */
        .timer-overlay { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.9); z-index:1001; display:none; align-items:center; justify-content:center; flex-direction:column; }
        .timer-overlay.show { display:flex; }
        .timer-display { font-family:'Bebas Neue',sans-serif; font-size:8rem; color:var(--accent); line-height:1; }
        .timer-label { font-size:1.2rem; color:var(--text2); margin-bottom:20px; }
        .timer-buttons { display:flex; gap:15px; margin-top:30px; }
        .timer-btn { padding:12px 30px; border-radius:12px; font-family:'Outfit',sans-serif; font-size:1rem; font-weight:500; cursor:pointer; border:none; }
        .timer-btn.primary { background:var(--grad); color:#fff; }
        .timer-btn.secondary { background:rgba(255,255,255,0.1); color:var(--text); }
        .timer-presets { display:flex; gap:10px; margin-top:20px; }
        .timer-preset { padding:8px 16px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:20px; color:var(--text2); font-size:0.85rem; cursor:pointer; }
        .timer-preset:active { background:var(--accent); color:#fff; }

        /* Measurements */
        .measure-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:10px; }
        @media(min-width:500px) { .measure-grid { display:grid; grid-template-columns:repeat(4,1fr); } }
        .measure-card { background:var(--bg-card); border-radius:12px; padding:12px; text-align:center; }
        .measure-card .icon { font-size:1.5rem; margin-bottom:5px; }
        .measure-card input { width:100%; padding:8px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:8px; color:var(--text); font-family:'Bebas Neue',sans-serif; font-size:1.3rem; text-align:center; margin:5px 0; }
        .measure-card input:focus { outline:none; border-color:var(--accent); }
        .measure-card .unit { font-size:0.7rem; color:var(--text3); }
        .measure-card .change { font-size:0.7rem; margin-top:5px; }
        .measure-card .change.up { color:var(--success); }
        .measure-card .change.down { color:#ef4444; }
        .measure-save { margin-top:15px; width:100%; padding:12px; background:var(--grad); border:none; border-radius:10px; color:#fff; font-family:'Outfit',sans-serif; font-size:0.9rem; font-weight:500; cursor:pointer; }
        .measure-save:active { transform:scale(0.98); }
        .measure-history { margin-top:15px; }
        .measure-history h4 { font-size:0.85rem; color:var(--text2); margin-bottom:10px; }
        .measure-history-item { display:flex; justify-content:space-between; padding:8px 10px; background:rgba(255,255,255,0.03); border-radius:8px; margin-bottom:5px; font-size:0.8rem; }
        .measure-history-item .date { color:var(--text3); }

        /* Macro Tracking */
        .macro-input { display:flex; align-items:center; gap:8px; margin-top:8px; }
        .macro-input input { width:70px; padding:6px 8px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:6px; color:var(--text); font-family:'Outfit',sans-serif; font-size:0.85rem; text-align:center; }
        .macro-input input:focus { outline:none; border-color:var(--accent); }
        .macro-btn { padding:6px 12px; background:var(--grad); border:none; border-radius:6px; color:#fff; font-size:0.75rem; cursor:pointer; }
        .macro-btn:active { transform:scale(0.95); }
        .quick-adds { display:flex; flex-wrap:wrap; gap:5px; margin-top:8px; }
        .quick-add { padding:4px 10px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:15px; font-size:0.7rem; color:var(--text2); cursor:pointer; }
        .quick-add:active { background:var(--accent); color:#fff; }
        .macro-actions { display:flex; gap:6px; margin-top:10px; }
        .macro-undo { padding:5px 10px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:6px; color:var(--text2); font-size:0.7rem; cursor:pointer; }
        .macro-undo:active { background:var(--accent); color:#fff; }
        .macro-reset { padding:5px 10px; background:rgba(239,68,68,0.15); border:1px solid rgba(239,68,68,0.3); border-radius:6px; color:#ef4444; font-size:0.7rem; cursor:pointer; }
        .macro-reset:active { background:#ef4444; color:#fff; }

        /* Notes */
        .notes-section { margin-top:20px; }
        .notes-textarea { width:100%; padding:12px; background:rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); border-radius:10px; color:var(--text); font-family:'Outfit',sans-serif; font-size:0.85rem; resize:none; min-height:80px; }
        .notes-textarea:focus { outline:none; border-color:var(--accent); }
        .notes-textarea::placeholder { color:var(--text3); }

        /* Streak */
        .streak-card { background:linear-gradient(135deg,#f59e0b,#fbbf24); border-radius:16px; padding:15px; margin-bottom:20px; display:flex; align-items:center; gap:15px; }
        .streak-fire { font-size:2.5rem; }
        .streak-info h3 { font-family:'Bebas Neue',sans-serif; font-size:1.8rem; color:#000; }
        .streak-info p { font-size:0.8rem; color:rgba(0,0,0,0.7); }
        .badges { display:flex; gap:8px; margin-left:auto; }
        .badge-item { width:40px; height:40px; background:rgba(0,0,0,0.2); border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:1.2rem; }
        .badge-item.locked { opacity:0.4; filter:grayscale(1); }

        /* Video Modal */
        .video-btn { padding:4px 10px; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.1); border-radius:15px; font-size:0.65rem; color:var(--text2); cursor:pointer; margin-left:auto; }
        .video-btn:active { background:var(--accent); color:#fff; }
        .video-modal { position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.9); z-index:1002; display:none; align-items:center; justify-content:center; padding:20px; }
        .video-modal.show { display:flex; }
        .video-content { background:var(--bg-card); border-radius:16px; padding:20px; max-width:500px; width:100%; text-align:center; }
        .video-content h3 { font-family:'Bebas Neue',sans-serif; font-size:1.3rem; margin-bottom:15px; }
        .video-placeholder { background:rgba(255,255,255,0.05); border-radius:12px; padding:40px; margin-bottom:15px; }
        .video-placeholder .icon { font-size:3rem; margin-bottom:10px; }
        .video-placeholder p { font-size:0.85rem; color:var(--text2); }
        .video-tips { text-align:left; background:rgba(255,255,255,0.03); border-radius:10px; padding:12px; }
        .video-tips h4 { font-size:0.85rem; color:var(--accent); margin-bottom:8px; }
        .video-tips ul { padding-left:16px; }
        .video-tips li { font-size:0.8rem; color:var(--text2); margin-bottom:4px; }
        .video-close { margin-top:15px; padding:10px 30px; background:var(--grad); border:none; border-radius:10px; color:#fff; font-family:'Outfit',sans-serif; cursor:pointer; }
    </style>
</head>
<body>
    <header class="header">
        <h1>FATÄ°H'Ä°N DÃ–NÃœÅÃœMÃœ</h1>
        <p class="sub">2 AylÄ±k Clean Bulk ProgramÄ±</p>
        <span class="badge">ğŸ¯ Hedef: +7.6 kg Kas</span>
        <button class="settings-btn" id="settingsBtn">âš™ï¸</button>
    </header>

    <div class="stats">
        <div class="stat"><div class="icon">ğŸ”¥</div><div class="val">2900</div><div class="lbl">Kalori</div></div>
        <div class="stat"><div class="icon">ğŸ¥©</div><div class="val">120g</div><div class="lbl">Protein</div></div>
        <div class="stat"><div class="icon">ğŸ’§</div><div class="val">3.5L</div><div class="lbl">Su</div></div>
        <div class="stat"><div class="icon">ğŸ“…</div><div class="val" id="daycount">0</div><div class="lbl">GÃ¼n</div></div>
    </div>

    <!-- Streak Card -->
    <div class="streak-card" id="streakCard">
        <div class="streak-fire">ğŸ”¥</div>
        <div class="streak-info">
            <h3><span id="streakCount">0</span> GÃœN SERÄ°!</h3>
            <p>Devam et, bÄ±rakma!</p>
        </div>
        <div class="badges">
            <div class="badge-item" id="badge7" title="7 GÃ¼n">ğŸ¥‰</div>
            <div class="badge-item locked" id="badge14" title="14 GÃ¼n">ğŸ¥ˆ</div>
            <div class="badge-item locked" id="badge30" title="30 GÃ¼n">ğŸ¥‡</div>
            <div class="badge-item locked" id="badge56" title="56 GÃ¼n">ğŸ†</div>
        </div>
    </div>

    <div class="water">
        <h3>ğŸ’§ Su Takibi (Her bardak = 250ml)</h3>
        <div class="water-grid" id="watergrid"></div>
        <div class="water-info"><span>BugÃ¼n:</span><span class="amt"><span id="wateramt">0</span> / 3500 ml</span></div>
    </div>

    <div class="tabs" id="tabs">
        <button class="tab active" data-day="pzt">Pazartesi</button>
        <button class="tab" data-day="sal">SalÄ±</button>
        <button class="tab" data-day="car">Ã‡arÅŸamba</button>
        <button class="tab" data-day="per">PerÅŸembe</button>
        <button class="tab" data-day="cum">Cuma</button>
        <button class="tab" data-day="bes">ğŸ½ï¸ Beslenme</button>
        <button class="tab" data-day="tip">ğŸ’¡ Ä°puÃ§larÄ±</button>
    </div>

    <!-- Push Workout -->
    <section class="day workout-section" data-workout="push" id="pzt">
        <div class="day-head"><div class="day-icon">ğŸ’ª</div><div><div class="day-title">PAZARTESÄ° - PUSH</div><div class="day-sub">GÃ¶ÄŸÃ¼s & Triceps</div></div></div>
        <div class="exlist">
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">1</span><div>Dumbbell Floor Press<span class="sub">Yerde GÃ¶ÄŸÃ¼s Pres</span></div></div><span class="exsets">4Ã—10-12</span></div><div class="extip">ğŸ’¡ AÄŸÄ±r kiloyla Ã§alÄ±ÅŸ, Ã¼st gÃ¶ÄŸse hizala!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">2</span><div>Dumbbell Fly<span class="sub">GÃ¶ÄŸÃ¼s AÃ§Ä±ÅŸ</span></div></div><span class="exsets">3Ã—12</span></div><div class="extip">ğŸ’¡ KollarÄ± hafif bÃ¼kÃ¼k tut!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">3</span><div>Shoulder Press<span class="sub">Omuz Pres</span></div></div><span class="exsets">4Ã—10</span></div><div class="extip">ğŸ’¡ SÄ±rtÄ± dik tut!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">4</span><div>Z-Bar Skullcrusher<span class="sub">Arka Kol</span></div></div><span class="exsets">3Ã—12</span></div><div class="extip">ğŸ’¡ Dirsekleri sabit tut!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">5</span><div>Lateral Raise<span class="sub">Yan Omuz â­</span></div></div><span class="exsets">4Ã—15</span></div><div class="extip">â­ KRÄ°TÄ°K! V vÃ¼cut iÃ§in!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
        </div>
    </section>

    <!-- Pull Workout -->
    <section class="day workout-section" data-workout="pull" id="sal">
        <div class="day-head"><div class="day-icon">ğŸ‹ï¸</div><div><div class="day-title">SALI - PULL</div><div class="day-sub">SÄ±rt & Biceps</div></div></div>
        <div class="exlist">
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">1</span><div>Dumbbell Row<span class="sub">Tek Kol SÄ±rt</span></div></div><span class="exsets">4Ã—10</span></div><div class="extip">ğŸ’¡ KÃ¼rek kemiÄŸini sÄ±kÄ±ÅŸtÄ±r!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">2</span><div>Z-Bar Bent Row<span class="sub">EÄŸilerek Ã‡ekiÅŸ</span></div></div><span class="exsets">4Ã—12</span></div><div class="extip">ğŸ’¡ 45Â° eÄŸil, gÃ¶beÄŸe Ã§ek!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">3</span><div>Z-Bar Biceps Curl<span class="sub">PazÄ± â­</span></div></div><span class="exsets">4Ã—10</span></div><div class="extip">â­ KRÄ°TÄ°K! KalÄ±n kollar iÃ§in!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">4</span><div>Hammer Curl<span class="sub">Ã‡ekiÃ§ BÃ¼kme</span></div></div><span class="exsets">3Ã—12</span></div><div class="extip">ğŸ’¡ AvuÃ§ iÃ§leri birbirine baksÄ±n!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">5</span><div>Rear Delt Fly<span class="sub">Arka Omuz</span></div></div><span class="exsets">3Ã—15</span></div><div class="extip">ğŸ’¡ EÄŸilerek yap!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
        </div>
    </section>

    <!-- Leg Workout -->
    <section class="day workout-section" data-workout="leg" id="per">
        <div class="day-head"><div class="day-icon">ğŸ¦µ</div><div><div class="day-title">PERÅEMBE - LEG</div><div class="day-sub">Bacak & KarÄ±n</div></div></div>
        <div class="exlist">
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">1</span><div>Goblet Squat<span class="sub">GÃ¶ÄŸÃ¼ste Tutarak</span></div></div><span class="exsets">4Ã—12</span></div><div class="extip">ğŸ’¡ Dizler parmak ucunu geÃ§mesin!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">2</span><div>Dumbbell Lunges<span class="sub">Ã–ne AdÄ±m</span></div></div><span class="exsets">3Ã—10 (her bacak)</span></div><div class="extip">ğŸ’¡ Uzun adÄ±m, arka diz yere deÄŸsin!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">3</span><div>Romanian Deadlift<span class="sub">Arka Bacak</span></div></div><span class="exsets">4Ã—12</span></div><div class="extip">ğŸ’¡ Dizleri hafif bÃ¼k, kalÃ§ayÄ± geriye it!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">4</span><div>Calf Raise<span class="sub">Parmak Ucunda</span></div></div><span class="exsets">4Ã—20</span></div><div class="extip">ğŸ’¡ Tepede 1sn bekle ve sÄ±kÄ±ÅŸtÄ±r!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button><button class="setbtn">4</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">5</span><div>Plank & Leg Raise<span class="sub">KarÄ±n</span></div></div><span class="exsets">3'er set</span></div><div class="extip">ğŸ’¡ Plank: 45-60sn, Leg Raise: 15 tekrar!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
        </div>
    </section>

    <!-- Volume Workout -->
    <section class="day workout-section" data-workout="volume" id="cum">
        <div class="day-head"><div class="day-icon">ğŸ”¥</div><div><div class="day-title">CUMA - HACÄ°M</div><div class="day-sub">Ãœst VÃ¼cut</div></div></div>
        <div class="exlist">
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">1</span><div>Z-Bar Upright Row<span class="sub">Ã‡eneye Ã‡ekiÅŸ</span></div></div><span class="exsets">3Ã—12</span></div><div class="extip">ğŸ’¡ Dirsekler yukarÄ±!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">2</span><div>Arnold Press<span class="sub">DÃ¶ndÃ¼rerek Omuz</span></div></div><span class="exsets">3Ã—10</span></div><div class="extip">ğŸ’¡ AvuÃ§ yÃ¼ze baksÄ±n, dÃ¶ndÃ¼r!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">3</span><div>Close Grip Press<span class="sub">Dar TutuÅŸ</span></div></div><span class="exsets">3Ã—12</span></div><div class="extip">ğŸ’¡ Tricepsi hisset!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
            <div class="excard"><div class="exhead"><div class="exname"><span class="num">4</span><div>Dumbbell Shrug<span class="sub">Omuz Silkme</span></div></div><span class="exsets">3Ã—15</span></div><div class="extip">ğŸ’¡ AÄŸÄ±r kilo, kulaklara Ã§ek!</div><div class="settrack"><button class="setbtn">1</button><button class="setbtn">2</button><button class="setbtn">3</button></div></div>
        </div>
    </section>

    <!-- Dinlenme GÃ¼nÃ¼ -->
    <section class="day" id="rest">
        <div class="rest">
            <div class="icon">ğŸ˜´</div>
            <h3 class="rest-title">DÄ°NLENME GÃœNÃœ</h3>
            <p>Kaslar dinlenirken bÃ¼yÃ¼r! Bol su, protein ve uyku.</p>
            <div class="restlist">
                <div class="restitem"><span class="chk">âœ“</span><span>3.5L su iÃ§tim</span></div>
                <div class="restitem"><span class="chk">âœ“</span><span>120g protein aldÄ±m</span></div>
                <div class="restitem"><span class="chk">âœ“</span><span>Creatine kullandÄ±m</span></div>
                <div class="restitem"><span class="chk">âœ“</span><span>7+ saat uyudum</span></div>
                <div class="restitem"><span class="chk">âœ“</span><span>Germe yaptÄ±m</span></div>
            </div>
        </div>
    </section>

    <!-- Beslenme -->
    <section class="day" id="bes">
        <div class="section">
            <h3 class="sectitle">ğŸ½ï¸ GÃ¼nlÃ¼k Beslenme</h3>
            <div class="nutgrid">
                <div class="nutcard">
                    <h4>ğŸ¥© Protein (120g)</h4>
                    <p class="desc">Kas inÅŸasÄ± iÃ§in ÅŸart!</p>
                    <div class="macrobar"><div class="macrofill protein" style="width:0%" id="protbar"></div></div>
                    <div class="macroinfo"><span id="protcur">0g</span><span>/ 120g</span></div>
                    <div class="macro-input">
                        <input type="number" id="protInput" placeholder="0" min="0">
                        <button class="macro-btn" onclick="addMacro('prot',120)">+ Ekle</button>
                    </div>
                    <div class="quick-adds">
                        <span class="quick-add" onclick="quickAdd('prot',6)">ğŸ¥š +6g</span>
                        <span class="quick-add" onclick="quickAdd('prot',25)">ğŸ— +25g</span>
                        <span class="quick-add" onclick="quickAdd('prot',12)">ğŸ§€ +12g</span>
                        <span class="quick-add" onclick="quickAdd('prot',30)">ğŸ¥¤ +30g</span>
                    </div>
                    <div class="macro-actions">
                        <button class="macro-undo" onclick="undoMacro('prot')">â†© Geri Al</button>
                        <button class="macro-reset" onclick="resetMacro('prot')">ğŸ—‘ SÄ±fÄ±rla</button>
                    </div>
                </div>
                <div class="nutcard">
                    <h4>ğŸš Karbonhidrat (350g)</h4>
                    <p class="desc">Enerji ve hacim iÃ§in!</p>
                    <div class="macrobar"><div class="macrofill carbs" style="width:0%" id="carbbar"></div></div>
                    <div class="macroinfo"><span id="carbcur">0g</span><span>/ 350g</span></div>
                    <div class="macro-input">
                        <input type="number" id="carbInput" placeholder="0" min="0">
                        <button class="macro-btn" onclick="addMacro('carb',350)">+ Ekle</button>
                    </div>
                    <div class="quick-adds">
                        <span class="quick-add" onclick="quickAdd('carb',30)">ğŸ¥£ +30g</span>
                        <span class="quick-add" onclick="quickAdd('carb',45)">ğŸš +45g</span>
                        <span class="quick-add" onclick="quickAdd('carb',50)">ğŸ +50g</span>
                        <span class="quick-add" onclick="quickAdd('carb',35)">ğŸ¥” +35g</span>
                    </div>
                    <div class="macro-actions">
                        <button class="macro-undo" onclick="undoMacro('carb')">â†© Geri Al</button>
                        <button class="macro-reset" onclick="resetMacro('carb')">ğŸ—‘ SÄ±fÄ±rla</button>
                    </div>
                </div>
                <div class="nutcard">
                    <h4>ğŸ’§ Su (3.5L)</h4>
                    <p class="desc">Susuz kas bÃ¼yÃ¼mez!</p>
                    <div class="macrobar"><div class="macrofill water" style="width:0%" id="watbar"></div></div>
                    <div class="macroinfo"><span id="watcur">0ml</span><span>/ 3500ml</span></div>
                </div>
            </div>
        </div>

        <!-- VÃ¼cut Ã–lÃ§Ã¼leri -->
        <div class="section">
            <h3 class="sectitle">ğŸ“ VÃ¼cut Ã–lÃ§Ã¼leri</h3>
            <div class="measure-grid">
                <div class="measure-card">
                    <div class="icon">âš–ï¸</div>
                    <input type="number" id="measureWeight" placeholder="--" step="0.1">
                    <div class="unit">kg</div>
                    <div class="change" id="weightChange"></div>
                </div>
                <div class="measure-card">
                    <div class="icon">ğŸ’ª</div>
                    <input type="number" id="measureArm" placeholder="--" step="0.1">
                    <div class="unit">Kol (cm)</div>
                    <div class="change" id="armChange"></div>
                </div>
                <div class="measure-card">
                    <div class="icon">ğŸ‘•</div>
                    <input type="number" id="measureChest" placeholder="--" step="0.1">
                    <div class="unit">GÃ¶ÄŸÃ¼s (cm)</div>
                    <div class="change" id="chestChange"></div>
                </div>
                <div class="measure-card">
                    <div class="icon">ğŸ©³</div>
                    <input type="number" id="measureWaist" placeholder="--" step="0.1">
                    <div class="unit">Bel (cm)</div>
                    <div class="change" id="waistChange"></div>
                </div>
            </div>
            <button class="measure-save" onclick="saveMeasurements()">ğŸ“ Ã–lÃ§Ã¼mleri Kaydet</button>
            <div class="measure-history" id="measureHistory"></div>
        </div>
        <div class="section">
            <h3 class="sectitle">ğŸ’Š Supplement</h3>
            <div class="supps">
                <div class="suppcard" id="crcard"><div class="suppicon cr">ğŸ’</div><div class="suppinfo"><h4>Creatine (5g)</h4><p>Her gÃ¼n! Spordan sonra veya sabah.</p></div><div class="suppchk">âœ“</div></div>
                <div class="suppcard" id="prcard"><div class="suppicon pr">ğŸ¥¤</div><div class="suppinfo"><h4>Protein Tozu</h4><p>Spordan hemen sonra 1 Ã¶lÃ§ek.</p></div><div class="suppchk">âœ“</div></div>
            </div>
        </div>
    </section>

    <!-- Ä°puÃ§larÄ± -->
    <section class="day" id="tip">
        <div class="section">
            <h3 class="sectitle">ğŸ“‹ 2 AylÄ±k Strateji</h3>
            <div class="tipcard"><h4>ğŸ“… 1. AY: Temel GÃ¼Ã§</h4><p>Formunu oturt!</p><ul><li>TekniÄŸi <strong>kusursuz</strong> Ã¶ÄŸren</li><li>Asla Ã¶ÄŸÃ¼n atlama</li><li>Creatine'i aksatma</li></ul></div>
            <div class="tipcard"><h4>ğŸš€ 2. AY: Hipertrofi</h4><p>Gaza bas!</p><ul><li><strong>AÄŸÄ±rlÄ±klarÄ± artÄ±r!</strong></li><li>Ä°ndirirken 3 sn yavaÅŸ</li><li>Son 2 tekrar zorla!</li></ul></div>
        </div>
        <div class="section">
            <h3 class="sectitle">âœ¨ KÄ±zlar Erisin</h3>
            <div class="aesthetic">
                <div class="aescard"><div class="emoji">ğŸ¦‹</div><h4>YAN OMUZ</h4><p>V vÃ¼cut!</p></div>
                <div class="aescard"><div class="emoji">ğŸ‘•</div><h4>ÃœST GÃ–ÄÃœS</h4><p>TiÅŸÃ¶rtten belli!</p></div>
                <div class="aescard"><div class="emoji">ğŸ’ª</div><h4>BICEPS</h4><p>KalÄ±n kollar!</p></div>
            </div>
        </div>
        <div class="notes-section">
            <h3 class="sectitle">ğŸ“ GÃ¼nlÃ¼k Notlar</h3>
            <textarea class="notes-textarea" id="dailyNotes" placeholder="BugÃ¼n nasÄ±l hissettin? Antrenman nasÄ±ldÄ±? Yorgunluk, motivasyon, Ã¶zel durumlar..."></textarea>
        </div>
    </section>

    <!-- Progress/Calendar Section (Global - appears under all sections) -->
    <div class="progress" id="globalProgress">
        <h3>ğŸ“Š 8 HaftalÄ±k Program</h3>
        <div class="week-nav">
            <button id="prevWeek">â€¹</button>
            <div class="week-info">
                <div class="week-num" id="weekNum">Hafta 1 / 8</div>
                <div class="week-dates" id="weekDates">1 Ocak - 7 Ocak</div>
            </div>
            <button id="nextWeek">â€º</button>
        </div>
        <div class="week-progress"><div class="week-progress-fill" id="totalProgress"></div></div>
        <div class="week-progress-text"><span id="totalDays">0</span> / 56 gÃ¼n tamamlandÄ±</div>
        <div class="calgrid" id="calgrid"></div>
    </div>

    <div class="motiv">
        <p>2 AY SONRA FATÄ°H'Ä° TANIYAMAYACAKSINIZ!</p>
        <div class="auth">ğŸ’ª Hadi bakalÄ±m!</div>
    </div>

    <footer class="footer">Fatih'in DÃ¶nÃ¼ÅŸÃ¼m ProgramÄ±</footer>

    <div class="toast" id="toast"><span>âœ…</span><span id="toastmsg">Harika!</span></div>

    <!-- Timer Overlay -->
    <div class="timer-overlay" id="timerOverlay">
        <div class="timer-label">Set ArasÄ± Dinlenme</div>
        <div class="timer-display" id="timerDisplay">60</div>
        <div class="timer-presets">
            <button class="timer-preset" onclick="setTimer(30)">30s</button>
            <button class="timer-preset" onclick="setTimer(60)">60s</button>
            <button class="timer-preset" onclick="setTimer(90)">90s</button>
            <button class="timer-preset" onclick="setTimer(120)">120s</button>
        </div>
        <div class="timer-buttons">
            <button class="timer-btn secondary" onclick="closeTimer()">Kapat</button>
            <button class="timer-btn primary" id="timerStartBtn" onclick="toggleTimer()">BaÅŸlat</button>
        </div>
    </div>

    <!-- Video Modal -->
    <div class="video-modal" id="videoModal">
        <div class="video-content">
            <h3 id="videoTitle">Egzersiz</h3>
            <div class="video-placeholder">
                <div class="icon">ğŸ¬</div>
                <p>Form videosu iÃ§in YouTube'da ara</p>
            </div>
            <div class="video-tips" id="videoTips">
                <h4>ğŸ’¡ Ã–nemli Noktalar</h4>
                <ul id="videoTipsList"></ul>
            </div>
            <button class="video-close" onclick="closeVideo()">Kapat</button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <h2>âš™ï¸ Ayarlar <button class="modal-close" id="modalClose">Ã—</button></h2>

            <div class="modal-section">
                <h3>Antrenman GÃ¼nlerini SeÃ§ (4 gÃ¼n)</h3>
                <div class="day-selector" id="daySelector">
                    <div class="day-selector-item" data-day="0"><span class="day-check">âœ“</span><div><div class="day-name">Pazartesi</div><div class="day-workout">Push - GÃ¶ÄŸÃ¼s & Triceps</div></div></div>
                    <div class="day-selector-item" data-day="1"><span class="day-check">âœ“</span><div><div class="day-name">SalÄ±</div><div class="day-workout">Pull - SÄ±rt & Biceps</div></div></div>
                    <div class="day-selector-item" data-day="2"><span class="day-check">âœ“</span><div><div class="day-name">Ã‡arÅŸamba</div><div class="day-workout">Dinlenme</div></div></div>
                    <div class="day-selector-item" data-day="3"><span class="day-check">âœ“</span><div><div class="day-name">PerÅŸembe</div><div class="day-workout">Leg - Bacak & KarÄ±n</div></div></div>
                    <div class="day-selector-item" data-day="4"><span class="day-check">âœ“</span><div><div class="day-name">Cuma</div><div class="day-workout">Volume - Ãœst VÃ¼cut</div></div></div>
                    <div class="day-selector-item" data-day="5"><span class="day-check">âœ“</span><div><div class="day-name">Cumartesi</div><div class="day-workout">Dinlenme</div></div></div>
                    <div class="day-selector-item" data-day="6"><span class="day-check">âœ“</span><div><div class="day-name">Pazar</div><div class="day-workout">Dinlenme</div></div></div>
                </div>
            </div>

            <div class="modal-section" id="workoutOrderSection">
                <h3>Antrenman SÄ±ralamasÄ±</h3>
                <div class="workout-order" id="workoutOrder"></div>
            </div>

            <div class="modal-section">
                <h3>Program BaÅŸlangÄ±Ã§ Tarihi</h3>
                <div class="date-picker-container">
                    <input type="date" id="programStartDate" class="date-input">
                    <p class="date-info">Takvim bu tarihe gÃ¶re hesaplanÄ±r</p>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn-cancel" id="btnCancel">Ä°ptal</button>
                <button class="btn-save" id="btnSave">Kaydet</button>
            </div>
        </div>
    </div>

    <script>
        const S={get:k=>{try{return localStorage.getItem(k)}catch(e){return null}},set:(k,v)=>{try{localStorage.setItem(k,v);return true}catch(e){return false}},rm:k=>{try{localStorage.removeItem(k)}catch(e){}}};
        const today=()=>new Date().toISOString().split('T')[0];
        const dateKey=d=>d.toISOString().split('T')[0];

        // Workout Types
        const workoutTypes = [
            { id: 'push', name: 'Push', icon: 'ğŸ’ª', desc: 'GÃ¶ÄŸÃ¼s & Triceps', section: 'pzt' },
            { id: 'pull', name: 'Pull', icon: 'ğŸ‹ï¸', desc: 'SÄ±rt & Biceps', section: 'sal' },
            { id: 'leg', name: 'Leg', icon: 'ğŸ¦µ', desc: 'Bacak & KarÄ±n', section: 'per' },
            { id: 'volume', name: 'Hacim', icon: 'ğŸ”¥', desc: 'Ãœst VÃ¼cut', section: 'cum' }
        ];

        const fullDayNames = ['Pazartesi', 'SalÄ±', 'Ã‡arÅŸamba', 'PerÅŸembe', 'Cuma', 'Cumartesi', 'Pazar'];
        const shortDayIds = ['pzt', 'sal', 'car', 'per', 'cum', 'cmt', 'paz'];

        // Default: Pzt, SalÄ±, PerÅŸembe, Cuma (index 0,1,3,4)
        let selectedDays = JSON.parse(S.get('f_workout_days') || '[0,1,3,4]');

        function getWorkoutSchedule() {
            // Maps selected day indices to workout types in order
            const schedule = {};
            selectedDays.forEach((dayIndex, i) => {
                if (i < workoutTypes.length) {
                    schedule[dayIndex] = workoutTypes[i];
                }
            });
            return schedule;
        }

        document.addEventListener('DOMContentLoaded',()=>{
            initWater();initTabs();initSets();initRest();initSupps();initCal();loadProgress();updateDays();initSettings();applyWorkoutDays();setToday();
        });

        function initWater(){
            const g=document.getElementById('watergrid');
            for(let i=0;i<14;i++){const d=document.createElement('div');d.className='glass';d.dataset.i=i;g.appendChild(d);}
            g.onclick=e=>{const gl=e.target.closest('.glass');if(!gl)return;const i=+gl.dataset.i,gs=document.querySelectorAll('.glass'),f=gl.classList.contains('filled');
            gs.forEach((x,j)=>{if(f){if(j>=i)x.classList.remove('filled')}else{if(j<=i)x.classList.add('filled')}});
            const c=document.querySelectorAll('.glass.filled').length;updWater(c);S.set('fw_'+today(),c);if(c>=14)toast('ğŸ’§ Su hedefi tamam!');};
            const sv=S.get('fw_'+today());if(sv){const c=+sv;document.querySelectorAll('.glass').forEach((x,i)=>{if(i<c)x.classList.add('filled')});updWater(c);}
        }
        function updWater(c){const a=c*250;document.getElementById('wateramt').textContent=a;const wb=document.getElementById('watbar');if(wb)wb.style.width=(a/3500*100)+'%';const wc=document.getElementById('watcur');if(wc)wc.textContent=a+'ml';}

        function initTabs(){document.querySelectorAll('.tab').forEach(t=>t.onclick=()=>{document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));t.classList.add('active');document.querySelectorAll('.day').forEach(d=>d.classList.remove('active'));document.getElementById(t.dataset.day)?.classList.add('active');});}
        
        function setToday(){
            const jsDay = new Date().getDay(); // 0=Pazar, 1=Pzt, ...
            const dayIndex = jsDay === 0 ? 6 : jsDay - 1; // 0=Pzt, 1=SalÄ±, ... 6=Pazar
            const schedule = getWorkoutSchedule();

            document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
            document.querySelectorAll('.day').forEach(x=>x.classList.remove('active'));

            // BugÃ¼n antrenman gÃ¼nÃ¼ mÃ¼?
            if (schedule[dayIndex]) {
                const workout = schedule[dayIndex];
                const tb = document.querySelector(`[data-day="${workout.id}"]`);
                if(tb) {
                    tb.classList.add('active');
                    document.getElementById(workout.id)?.classList.add('active');
                    return;
                }
            } else {
                // Dinlenme gÃ¼nÃ¼
                const restTab = document.querySelector(`[data-restday="${dayIndex}"]`);
                if (restTab) {
                    restTab.classList.add('active');
                    document.getElementById('rest')?.classList.add('active');
                    // BaÅŸlÄ±ÄŸÄ± gÃ¼ncelle
                    const restTitle = document.querySelector('.rest-title');
                    if (restTitle) {
                        restTitle.textContent = `${fullDayNames[dayIndex].toUpperCase()} - DÄ°NLENME`;
                    }
                    return;
                }
            }
        }

        function initSets(){document.querySelectorAll('.setbtn').forEach(b=>b.onclick=()=>{b.classList.toggle('done');const c=b.closest('.excard'),all=c.querySelectorAll('.setbtn'),dn=c.querySelectorAll('.setbtn.done');if(all.length===dn.length){c.classList.add('done');toast('ğŸ’ª Hareket tamam!');}else c.classList.remove('done');saveProgress();checkDayDone();});}

        function initRest(){document.querySelectorAll('.restitem').forEach(r=>r.onclick=()=>{r.classList.toggle('checked');if(document.querySelectorAll('.restitem').length===document.querySelectorAll('.restitem.checked').length)toast('ğŸ˜´ Dinlenme gÃ¼nÃ¼ tamam!');});}

        function initSupps(){document.getElementById('crcard').onclick=function(){this.classList.toggle('taken');S.set('fcr_'+today(),this.classList.contains('taken'));if(this.classList.contains('taken'))toast('ğŸ’ Creatine alÄ±ndÄ±!');};document.getElementById('prcard').onclick=function(){this.classList.toggle('taken');S.set('fpr_'+today(),this.classList.contains('taken'));if(this.classList.contains('taken'))toast('ğŸ¥¤ Protein alÄ±ndÄ±!');};}

        // 8 HaftalÄ±k Takvim Sistemi
        let programStart = null;
        let currentWeek = 0;
        const TOTAL_WEEKS = 8;
        const dayNames = ['Pzt','Sal','Ã‡ar','Per','Cum','Cmt','Paz'];
        const monthNames = ['Ocak','Åubat','Mart','Nisan','MayÄ±s','Haziran','Temmuz','AÄŸustos','EylÃ¼l','Ekim','KasÄ±m','AralÄ±k'];

        function getProgramStart() {
            let saved = S.get('f_program_start');
            if (saved) return new Date(saved);
            // Ä°lk aÃ§Ä±lÄ±ÅŸta bugÃ¼nÃ¼n haftasÄ±nÄ±n pazartesisini baÅŸlangÄ±Ã§ yap
            const now = new Date();
            const dow = now.getDay();
            const diff = dow === 0 ? 6 : dow - 1;
            const monday = new Date(now);
            monday.setDate(now.getDate() - diff);
            monday.setHours(0,0,0,0);
            S.set('f_program_start', monday.toISOString());
            return monday;
        }

        function getWeekStart(weekIndex) {
            const start = new Date(programStart);
            start.setDate(start.getDate() + (weekIndex * 7));
            return start;
        }

        function formatDateRange(weekIndex) {
            const start = getWeekStart(weekIndex);
            const end = new Date(start);
            end.setDate(start.getDate() + 6);
            const sameMonth = start.getMonth() === end.getMonth();
            if (sameMonth) {
                return `${start.getDate()} - ${end.getDate()} ${monthNames[start.getMonth()]}`;
            }
            return `${start.getDate()} ${monthNames[start.getMonth()]} - ${end.getDate()} ${monthNames[end.getMonth()]}`;
        }

        function renderWeek(weekIndex) {
            const g = document.getElementById('calgrid');
            if (!g) return;
            g.innerHTML = '';

            const weekStart = getWeekStart(weekIndex);
            const now = new Date();
            now.setHours(0,0,0,0);

            for (let d = 0; d < 7; d++) {
                const dt = new Date(weekStart);
                dt.setDate(weekStart.getDate() + d);
                const el = document.createElement('div');
                el.className = 'calday';
                const k = dateKey(dt);
                el.dataset.k = k;

                const isDone = S.get('fd_' + k) === '1';
                const isToday = dt.toDateString() === now.toDateString();
                const isFuture = dt > now;

                el.innerHTML = `<span class="dn">${dayNames[d]}</span><span class="dd">${dt.getDate()}</span>${isDone ? '<span class="check">âœ“</span>' : ''}`;

                if (isToday) el.classList.add('today');
                if (isDone) el.classList.add('done');
                if (isFuture) el.classList.add('future');

                el.onclick = () => {
                    if (el.classList.contains('done')) {
                        el.classList.remove('done');
                        S.rm('fd_' + k);
                        el.querySelector('.check')?.remove();
                    } else {
                        el.classList.add('done');
                        S.set('fd_' + k, '1');
                        if (!el.querySelector('.check')) {
                            el.insertAdjacentHTML('beforeend', '<span class="check">âœ“</span>');
                        }
                    }
                    updateDays();
                    updateTotalProgress();
                };
                g.appendChild(el);
            }

            // Hafta bilgisini gÃ¼ncelle
            document.getElementById('weekNum').textContent = `Hafta ${weekIndex + 1} / ${TOTAL_WEEKS}`;
            document.getElementById('weekDates').textContent = formatDateRange(weekIndex);

            // ButonlarÄ± gÃ¼ncelle
            document.getElementById('prevWeek').disabled = weekIndex === 0;
            document.getElementById('nextWeek').disabled = weekIndex === TOTAL_WEEKS - 1;
        }

        function updateTotalProgress() {
            let count = 0;
            for (let w = 0; w < TOTAL_WEEKS; w++) {
                const weekStart = getWeekStart(w);
                for (let d = 0; d < 7; d++) {
                    const dt = new Date(weekStart);
                    dt.setDate(weekStart.getDate() + d);
                    if (S.get('fd_' + dateKey(dt)) === '1') count++;
                }
            }
            const totalDays = TOTAL_WEEKS * 7;
            document.getElementById('totalDays').textContent = count;
            document.getElementById('totalProgress').style.width = (count / totalDays * 100) + '%';
        }

        function getCurrentWeekIndex() {
            const now = new Date();
            now.setHours(0,0,0,0);
            const diffTime = now - programStart;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            const weekIndex = Math.floor(diffDays / 7);
            return Math.max(0, Math.min(weekIndex, TOTAL_WEEKS - 1));
        }

        function initCal() {
            programStart = getProgramStart();
            currentWeek = getCurrentWeekIndex();

            document.getElementById('prevWeek').onclick = () => {
                if (currentWeek > 0) {
                    currentWeek--;
                    renderWeek(currentWeek);
                }
            };

            document.getElementById('nextWeek').onclick = () => {
                if (currentWeek < TOTAL_WEEKS - 1) {
                    currentWeek++;
                    renderWeek(currentWeek);
                }
            };

            renderWeek(currentWeek);
            updateTotalProgress();
        }

        function saveProgress(){const p={};document.querySelectorAll('.excard').forEach((c,i)=>{p['e'+i]=c.querySelectorAll('.setbtn.done').length;});S.set('fp_'+today(),JSON.stringify(p));}
        function loadProgress(){const sv=S.get('fp_'+today());if(sv){try{const p=JSON.parse(sv);document.querySelectorAll('.excard').forEach((c,i)=>{const n=p['e'+i]||0;const bs=c.querySelectorAll('.setbtn');for(let j=0;j<n;j++)if(bs[j])bs[j].classList.add('done');if(n===bs.length&&n>0)c.classList.add('done');});}catch(e){}}if(S.get('fcr_'+today())==='true')document.getElementById('crcard')?.classList.add('taken');if(S.get('fpr_'+today())==='true')document.getElementById('prcard')?.classList.add('taken');}

        function checkDayDone(){const sec=document.querySelector('.day.active');if(!sec||['bes','tip'].includes(sec.id))return;const cs=sec.querySelectorAll('.excard'),dn=sec.querySelectorAll('.excard.done');if(cs.length===dn.length&&cs.length>0){toast('ğŸ‰ Antrenman tamamlandÄ±!');S.set('fd_'+today(),'1');updateDays();updateTotalProgress();const cd=document.querySelector(`.calday[data-k="${today()}"]`);if(cd){cd.classList.add('done');if(!cd.querySelector('.check'))cd.insertAdjacentHTML('beforeend','<span class="check">âœ“</span>');}}}

        function updateDays(){let c=0;try{for(let i=0;i<localStorage.length;i++){const k=localStorage.key(i);if(k&&k.startsWith('fd_')&&localStorage.getItem(k)==='1')c++;}}catch(e){}document.getElementById('daycount').textContent=c;}

        function toast(m){const t=document.getElementById('toast');document.getElementById('toastmsg').textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2500);}

        // Settings Functions
        let tempSelectedDays = [];

        function initSettings() {
            const modal = document.getElementById('settingsModal');
            const settingsBtn = document.getElementById('settingsBtn');
            const modalClose = document.getElementById('modalClose');
            const btnCancel = document.getElementById('btnCancel');
            const btnSave = document.getElementById('btnSave');
            const daySelector = document.getElementById('daySelector');

            settingsBtn.onclick = () => {
                tempSelectedDays = [...selectedDays];
                renderDaySelector();
                renderWorkoutOrder();
                // Load current program start date
                const dateInput = document.getElementById('programStartDate');
                const currentStart = getProgramStart();
                dateInput.value = dateKey(currentStart);
                modal.classList.add('show');
            };

            modalClose.onclick = () => modal.classList.remove('show');
            btnCancel.onclick = () => modal.classList.remove('show');

            modal.onclick = (e) => {
                if (e.target === modal) modal.classList.remove('show');
            };

            btnSave.onclick = () => {
                if (tempSelectedDays.length !== 4) {
                    toast('âš ï¸ 4 gÃ¼n seÃ§melisin!');
                    return;
                }
                selectedDays = [...tempSelectedDays].sort((a,b) => a-b);
                S.set('f_workout_days', JSON.stringify(selectedDays));

                // Save program start date
                const dateInput = document.getElementById('programStartDate');
                if (dateInput.value) {
                    const newStart = new Date(dateInput.value);
                    newStart.setHours(0,0,0,0);
                    S.set('f_program_start', newStart.toISOString());
                    programStart = newStart;
                    currentWeek = getCurrentWeekIndex();
                    renderWeek(currentWeek);
                    updateTotalProgress();
                }

                applyWorkoutDays();
                modal.classList.remove('show');
                toast('âœ… Ayarlar kaydedildi!');
            };

            daySelector.onclick = (e) => {
                const item = e.target.closest('.day-selector-item');
                if (!item) return;
                const dayIndex = parseInt(item.dataset.day);

                if (tempSelectedDays.includes(dayIndex)) {
                    tempSelectedDays = tempSelectedDays.filter(d => d !== dayIndex);
                } else {
                    if (tempSelectedDays.length >= 4) {
                        toast('âš ï¸ En fazla 4 gÃ¼n!');
                        return;
                    }
                    tempSelectedDays.push(dayIndex);
                }
                tempSelectedDays.sort((a,b) => a-b);
                renderDaySelector();
                renderWorkoutOrder();
            };
        }

        function renderDaySelector() {
            document.querySelectorAll('.day-selector-item').forEach(item => {
                const dayIndex = parseInt(item.dataset.day);
                const isSelected = tempSelectedDays.includes(dayIndex);
                item.classList.toggle('selected', isSelected);

                // Update workout description based on order
                const orderIndex = tempSelectedDays.indexOf(dayIndex);
                const workoutDesc = item.querySelector('.day-workout');
                if (isSelected && orderIndex < workoutTypes.length) {
                    workoutDesc.textContent = `${workoutTypes[orderIndex].name} - ${workoutTypes[orderIndex].desc}`;
                } else {
                    workoutDesc.textContent = 'Dinlenme';
                }
            });
        }

        function renderWorkoutOrder() {
            const container = document.getElementById('workoutOrder');
            const section = document.getElementById('workoutOrderSection');

            if (tempSelectedDays.length === 0) {
                section.style.display = 'none';
                return;
            }
            section.style.display = 'block';

            container.innerHTML = tempSelectedDays.map((dayIndex, i) => {
                if (i >= workoutTypes.length) return '';
                const workout = workoutTypes[i];
                return `<div class="workout-order-item">
                    <span class="order-num">${i+1}</span>
                    <span class="order-icon">${workout.icon}</span>
                    <span>${fullDayNames[dayIndex]}: ${workout.name}</span>
                </div>`;
            }).join('');
        }

        function applyWorkoutDays() {
            const tabsContainer = document.getElementById('tabs');
            const schedule = getWorkoutSchedule();

            // Rebuild tabs
            tabsContainer.innerHTML = '';

            // Add all 7 days as tabs
            for (let dayIndex = 0; dayIndex < 7; dayIndex++) {
                const dayName = fullDayNames[dayIndex];
                const btn = document.createElement('button');
                btn.className = 'tab';

                if (schedule[dayIndex]) {
                    // Antrenman gÃ¼nÃ¼
                    const workout = schedule[dayIndex];
                    btn.dataset.day = workout.id;
                    btn.innerHTML = `<span class="tab-icon">${workout.icon}</span>${dayName}`;

                    // Update section header
                    const section = document.querySelector(`[data-workout="${workout.id}"]`);
                    if (section) {
                        section.id = workout.id;
                        const title = section.querySelector('.day-title');
                        const sub = section.querySelector('.day-sub');
                        const icon = section.querySelector('.day-icon');
                        if (title) title.textContent = `${dayName.toUpperCase()} - ${workout.name.toUpperCase()}`;
                        if (sub) sub.textContent = workout.desc;
                        if (icon) icon.textContent = workout.icon;
                    }
                } else {
                    // Dinlenme gÃ¼nÃ¼
                    btn.dataset.day = 'rest';
                    btn.dataset.restday = dayIndex;
                    btn.innerHTML = `<span class="tab-icon">ğŸ˜´</span>${dayName}`;
                    btn.classList.add('rest-tab');
                }

                tabsContainer.appendChild(btn);
            }

            // Add Beslenme and Ä°puÃ§larÄ± tabs
            const besTab = document.createElement('button');
            besTab.className = 'tab';
            besTab.dataset.day = 'bes';
            besTab.textContent = 'ğŸ½ï¸ Beslenme';
            tabsContainer.appendChild(besTab);

            const tipTab = document.createElement('button');
            tipTab.className = 'tab';
            tipTab.dataset.day = 'tip';
            tipTab.textContent = 'ğŸ’¡ Ä°puÃ§larÄ±';
            tabsContainer.appendChild(tipTab);

            // Reinit tabs with rest day title update
            initTabsWithRest();
        }

        function initTabsWithRest() {
            document.querySelectorAll('.tab').forEach(t => {
                t.onclick = () => {
                    document.querySelectorAll('.tab').forEach(x => x.classList.remove('active'));
                    t.classList.add('active');
                    document.querySelectorAll('.day').forEach(d => d.classList.remove('active'));

                    const targetId = t.dataset.day;
                    document.getElementById(targetId)?.classList.add('active');

                    // Dinlenme gÃ¼nÃ¼ ise baÅŸlÄ±ÄŸÄ± gÃ¼ncelle
                    if (targetId === 'rest' && t.dataset.restday !== undefined) {
                        const dayIndex = parseInt(t.dataset.restday);
                        const restTitle = document.querySelector('.rest-title');
                        if (restTitle) {
                            restTitle.textContent = `${fullDayNames[dayIndex].toUpperCase()} - DÄ°NLENME`;
                        }
                    }
                };
            });
        }

        // ========== MACRO TRACKING ==========
        let macros = { prot: 0, carb: 0 };
        let macroHistory = { prot: [], carb: [] };

        function initMacros() {
            const saved = S.get('fm_' + today());
            if (saved) {
                try {
                    macros = JSON.parse(saved);
                    updateMacroUI();
                } catch(e) {}
            }
            const histSaved = S.get('fmh_' + today());
            if (histSaved) {
                try {
                    macroHistory = JSON.parse(histSaved);
                } catch(e) {}
            }
        }

        function addMacro(type, max) {
            const input = document.getElementById(type + 'Input');
            const val = parseInt(input.value) || 0;
            if (val > 0) {
                macroHistory[type].push(val);
                macros[type] = Math.min((macros[type] || 0) + val, max * 2);
                input.value = '';
                saveMacros();
                updateMacroUI();
                if (macros[type] >= max) toast(type === 'prot' ? 'ğŸ¥© Protein hedefi tamam!' : 'ğŸš Karb hedefi tamam!');
            }
        }

        function quickAdd(type, amount) {
            const max = type === 'prot' ? 120 : 350;
            macroHistory[type].push(amount);
            macros[type] = Math.min((macros[type] || 0) + amount, max * 2);
            saveMacros();
            updateMacroUI();
            toast(`+${amount}g eklendi!`);
        }

        function undoMacro(type) {
            if (macroHistory[type].length === 0) {
                toast('âš ï¸ Geri alÄ±nacak iÅŸlem yok!');
                return;
            }
            const lastVal = macroHistory[type].pop();
            macros[type] = Math.max(0, (macros[type] || 0) - lastVal);
            saveMacros();
            updateMacroUI();
            toast(`â†© ${lastVal}g geri alÄ±ndÄ±!`);
        }

        function resetMacro(type) {
            macros[type] = 0;
            macroHistory[type] = [];
            saveMacros();
            updateMacroUI();
            toast(type === 'prot' ? 'ğŸ—‘ Protein sÄ±fÄ±rlandÄ±!' : 'ğŸ—‘ Karb sÄ±fÄ±rlandÄ±!');
        }

        function saveMacros() {
            S.set('fm_' + today(), JSON.stringify(macros));
            S.set('fmh_' + today(), JSON.stringify(macroHistory));
        }

        function updateMacroUI() {
            const protMax = 120, carbMax = 350;
            document.getElementById('protcur').textContent = macros.prot + 'g';
            document.getElementById('carbcur').textContent = macros.carb + 'g';
            document.getElementById('protbar').style.width = Math.min(macros.prot / protMax * 100, 100) + '%';
            document.getElementById('carbbar').style.width = Math.min(macros.carb / carbMax * 100, 100) + '%';
        }

        // ========== MEASUREMENTS ==========
        function saveMeasurements() {
            const weight = document.getElementById('measureWeight').value;
            const arm = document.getElementById('measureArm').value;
            const chest = document.getElementById('measureChest').value;
            const waist = document.getElementById('measureWaist').value;

            if (!weight && !arm && !chest && !waist) {
                toast('âš ï¸ En az bir Ã¶lÃ§Ã¼m gir!');
                return;
            }

            const measurements = { weight, arm, chest, waist, date: today() };
            let history = JSON.parse(S.get('f_measurements') || '[]');

            // BugÃ¼n zaten kayÄ±t varsa gÃ¼ncelle
            const todayIndex = history.findIndex(m => m.date === today());
            if (todayIndex >= 0) {
                history[todayIndex] = measurements;
            } else {
                history.push(measurements);
            }

            // Son 10 kayÄ±t tut
            if (history.length > 10) history = history.slice(-10);

            S.set('f_measurements', JSON.stringify(history));
            toast('ğŸ“ Ã–lÃ§Ã¼mler kaydedildi!');
            renderMeasureHistory();
        }

        function renderMeasureHistory() {
            const history = JSON.parse(S.get('f_measurements') || '[]');
            const container = document.getElementById('measureHistory');

            if (history.length === 0) {
                container.innerHTML = '';
                return;
            }

            // Ä°lk ve son kayÄ±tlar arasÄ±ndaki farklarÄ± hesapla
            const first = history[0];
            const last = history[history.length - 1];

            ['weight', 'arm', 'chest', 'waist'].forEach(key => {
                const changeEl = document.getElementById(key + 'Change');
                if (changeEl && first[key] && last[key]) {
                    const diff = (parseFloat(last[key]) - parseFloat(first[key])).toFixed(1);
                    if (diff > 0) {
                        changeEl.textContent = `+${diff}`;
                        changeEl.className = 'change ' + (key === 'waist' ? 'down' : 'up');
                    } else if (diff < 0) {
                        changeEl.textContent = diff;
                        changeEl.className = 'change ' + (key === 'waist' ? 'up' : 'down');
                    } else {
                        changeEl.textContent = '';
                    }
                }
            });

            // Son 5 kaydÄ± gÃ¶ster
            const recent = history.slice(-5).reverse();
            container.innerHTML = `
                <h4>ğŸ“Š Son KayÄ±tlar</h4>
                ${recent.map(m => `
                    <div class="measure-history-item">
                        <span class="date">${formatMeasureDate(m.date)}</span>
                        <span>${m.weight ? m.weight + 'kg' : '-'} | ${m.arm ? m.arm + 'cm' : '-'} | ${m.chest ? m.chest + 'cm' : '-'} | ${m.waist ? m.waist + 'cm' : '-'}</span>
                    </div>
                `).join('')}
            `;

            // Son kaydÄ± inputlara yÃ¼kle
            if (last) {
                if (last.weight) document.getElementById('measureWeight').placeholder = last.weight;
                if (last.arm) document.getElementById('measureArm').placeholder = last.arm;
                if (last.chest) document.getElementById('measureChest').placeholder = last.chest;
                if (last.waist) document.getElementById('measureWaist').placeholder = last.waist;
            }
        }

        function formatMeasureDate(dateStr) {
            const d = new Date(dateStr);
            return `${d.getDate()} ${monthNames[d.getMonth()]}`;
        }

        // ========== TIMER ==========
        let timerSeconds = 60;
        let timerInterval = null;
        let timerRunning = false;

        function openTimer() {
            document.getElementById('timerOverlay').classList.add('show');
            timerSeconds = 60;
            updateTimerDisplay();
        }

        function closeTimer() {
            document.getElementById('timerOverlay').classList.remove('show');
            stopTimer();
        }

        function setTimer(seconds) {
            timerSeconds = seconds;
            updateTimerDisplay();
            stopTimer();
        }

        function toggleTimer() {
            if (timerRunning) {
                stopTimer();
            } else {
                startTimer();
            }
        }

        function startTimer() {
            timerRunning = true;
            document.getElementById('timerStartBtn').textContent = 'Durdur';
            timerInterval = setInterval(() => {
                timerSeconds--;
                updateTimerDisplay();
                if (timerSeconds <= 0) {
                    stopTimer();
                    timerComplete();
                }
            }, 1000);
        }

        function stopTimer() {
            timerRunning = false;
            document.getElementById('timerStartBtn').textContent = 'BaÅŸlat';
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function updateTimerDisplay() {
            document.getElementById('timerDisplay').textContent = timerSeconds;
        }

        function timerComplete() {
            toast('â° SÃ¼re doldu! Sonraki sete geÃ§!');
            // TitreÅŸim
            if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
        }

        // ========== VIDEO TIPS ==========
        const exerciseTips = {
            'Dumbbell Floor Press': ['SÄ±rtÄ±nÄ± yere yapÄ±ÅŸtÄ±r', 'Dirsekler 45Â° aÃ§Ä±da', 'KontrollÃ¼ indir'],
            'Dumbbell Fly': ['KollarÄ± hafif bÃ¼kÃ¼k tut', 'GÃ¶ÄŸsÃ¼ sÄ±kÄ±ÅŸtÄ±r', 'YavaÅŸ indir'],
            'Shoulder Press': ['SÄ±rtÄ± dik tut', 'KollarÄ± tam uzat', 'Core sÄ±kÄ±'],
            'Z-Bar Skullcrusher': ['Dirsekleri sabit tut', 'AlÄ±na doÄŸru indir', 'Tricepsi hisset'],
            'Lateral Raise': ['Hafif Ã¶ne eÄŸil', 'Dirsekler hafif bÃ¼kÃ¼k', 'KontrollÃ¼ kaldÄ±r'],
            'Dumbbell Row': ['SÄ±rtÄ± dÃ¼z tut', 'KÃ¼rek kemiÄŸini sÄ±kÄ±ÅŸtÄ±r', 'Dirsek yukarÄ±'],
            'Z-Bar Bent Row': ['45Â° eÄŸil', 'GÃ¶beÄŸe Ã§ek', 'OmuzlarÄ± aÅŸaÄŸÄ±'],
            'Z-Bar Biceps Curl': ['Dirsekleri sabitle', 'SÄ±rtÄ± kullanma', 'Tepe noktasÄ±nda sÄ±k'],
            'Hammer Curl': ['AvuÃ§lar birbirine baksÄ±n', 'YavaÅŸ indir', 'Forearm Ã§alÄ±ÅŸÄ±r'],
            'Rear Delt Fly': ['EÄŸilerek yap', 'Kollar dÃ¼z', 'Arka omuzu hisset'],
            'Goblet Squat': ['GÃ¶ÄŸÃ¼ste tut', 'Dizler dÄ±ÅŸa', 'Derin in'],
            'Dumbbell Lunges': ['Uzun adÄ±m at', 'Arka diz yere', 'Dik dur'],
            'Romanian Deadlift': ['Dizleri hafif bÃ¼k', 'KalÃ§ayÄ± geriye it', 'SÄ±rt dÃ¼z'],
            'Calf Raise': ['Tepede bekle', 'Tam aÅŸaÄŸÄ± in', 'YavaÅŸ yap'],
            'Plank & Leg Raise': ['Core sÄ±kÄ±', 'Nefes al', 'KalÃ§ayÄ± dÃ¼ÅŸÃ¼rme'],
            'Z-Bar Upright Row': ['Dirsekler yukarÄ±', 'Ã‡eneye Ã§ek', 'OmuzlarÄ± kaldÄ±r'],
            'Arnold Press': ['DÃ¶ndÃ¼rerek kaldÄ±r', 'AvuÃ§lar yÃ¼ze baksÄ±n', 'Tam uzat'],
            'Close Grip Press': ['Dar tutuÅŸ', 'Tricepsi hisset', 'Dirsekler vÃ¼cuda yakÄ±n'],
            'Dumbbell Shrug': ['AÄŸÄ±r kilo', 'Kulaklara Ã§ek', 'Tepede bekle']
        };

        function openVideo(exerciseName) {
            document.getElementById('videoTitle').textContent = exerciseName;
            const tips = exerciseTips[exerciseName] || ['Form videosunu izle', 'KontrollÃ¼ hareket et', 'Hedef kasÄ± hisset'];
            document.getElementById('videoTipsList').innerHTML = tips.map(t => `<li>${t}</li>`).join('');
            document.getElementById('videoModal').classList.add('show');
        }

        function closeVideo() {
            document.getElementById('videoModal').classList.remove('show');
        }

        // ========== NOTES ==========
        function initNotes() {
            const saved = S.get('fn_' + today());
            if (saved) {
                document.getElementById('dailyNotes').value = saved;
            }
            document.getElementById('dailyNotes').onblur = function() {
                S.set('fn_' + today(), this.value);
            };
        }

        // ========== STREAK ==========
        function calculateStreak() {
            let streak = 0;
            const now = new Date();
            now.setHours(0, 0, 0, 0);

            // BugÃ¼nden geriye doÄŸru say
            for (let i = 0; i < 100; i++) {
                const checkDate = new Date(now);
                checkDate.setDate(now.getDate() - i);
                const key = 'fd_' + dateKey(checkDate);

                if (S.get(key) === '1') {
                    streak++;
                } else if (i > 0) {
                    // BugÃ¼n henÃ¼z tamamlanmamÄ±ÅŸ olabilir, ama Ã¶nceki gÃ¼nler iÃ§in kÄ±r
                    break;
                }
            }

            return streak;
        }

        function updateStreak() {
            const streak = calculateStreak();
            document.getElementById('streakCount').textContent = streak;

            // Rozetleri gÃ¼ncelle
            const badges = [
                { id: 'badge7', threshold: 7 },
                { id: 'badge14', threshold: 14 },
                { id: 'badge30', threshold: 30 },
                { id: 'badge56', threshold: 56 }
            ];

            badges.forEach(badge => {
                const el = document.getElementById(badge.id);
                if (el) {
                    if (streak >= badge.threshold) {
                        el.classList.remove('locked');
                    } else {
                        el.classList.add('locked');
                    }
                }
            });

            // 0 seri ise kartÄ± gizle
            const streakCard = document.getElementById('streakCard');
            if (streak === 0) {
                streakCard.style.display = 'none';
            } else {
                streakCard.style.display = 'flex';
            }
        }

        // ========== WEIGHT TRACKING ==========
        function initWeightTracking() {
            document.querySelectorAll('.excard').forEach((card, index) => {
                const settrack = card.querySelector('.settrack');
                if (!settrack) return;

                // Weight input ekle
                const weightDiv = document.createElement('div');
                weightDiv.className = 'weight-input';
                weightDiv.innerHTML = `
                    <label>AÄŸÄ±rlÄ±k:</label>
                    <input type="number" class="ex-weight" data-ex="${index}" placeholder="--" step="0.5" min="0">
                    <span>kg</span>
                    <span class="weight-change" id="wc${index}"></span>
                `;
                settrack.after(weightDiv);

                // KayÄ±tlÄ± deÄŸeri yÃ¼kle
                const saved = S.get('few_' + index);
                if (saved) {
                    weightDiv.querySelector('input').placeholder = saved;
                }

                // DeÄŸiÅŸikliÄŸi kaydet
                weightDiv.querySelector('input').onchange = function() {
                    if (this.value) {
                        const oldVal = parseFloat(S.get('few_' + index)) || 0;
                        S.set('few_' + index, this.value);

                        // DeÄŸiÅŸimi gÃ¶ster
                        if (oldVal > 0) {
                            const diff = (parseFloat(this.value) - oldVal).toFixed(1);
                            const changeEl = document.getElementById('wc' + index);
                            if (diff > 0) {
                                changeEl.textContent = `+${diff}kg`;
                                changeEl.className = 'weight-change up';
                            } else if (diff < 0) {
                                changeEl.textContent = `${diff}kg`;
                                changeEl.className = 'weight-change down';
                            }
                        }
                        toast('ğŸ’ª AÄŸÄ±rlÄ±k kaydedildi!');
                    }
                };
            });
        }

        // ========== VIDEO BUTTONS ==========
        function initVideoButtons() {
            document.querySelectorAll('.excard').forEach(card => {
                const nameEl = card.querySelector('.exname > div');
                if (!nameEl) return;

                const exerciseName = nameEl.childNodes[0].textContent.trim();
                const exhead = card.querySelector('.exhead');

                const videoBtn = document.createElement('button');
                videoBtn.className = 'video-btn';
                videoBtn.textContent = 'ğŸ“¹ Form';
                videoBtn.onclick = (e) => {
                    e.stopPropagation();
                    openVideo(exerciseName);
                };
                exhead.appendChild(videoBtn);
            });
        }

        // ========== REST DAY CHECKLIST SAVE ==========
        function initRestWithSave() {
            const items = document.querySelectorAll('.restitem');

            // KayÄ±tlÄ± durumlarÄ± yÃ¼kle
            const saved = S.get('frest_' + today());
            if (saved) {
                try {
                    const checked = JSON.parse(saved);
                    items.forEach((item, i) => {
                        if (checked[i]) item.classList.add('checked');
                    });
                } catch(e) {}
            }

            // Click handler
            items.forEach((r, i) => {
                r.onclick = () => {
                    r.classList.toggle('checked');

                    // Kaydet
                    const states = [];
                    items.forEach(item => states.push(item.classList.contains('checked')));
                    S.set('frest_' + today(), JSON.stringify(states));

                    if (items.length === document.querySelectorAll('.restitem.checked').length) {
                        toast('ğŸ˜´ Dinlenme gÃ¼nÃ¼ tamam!');
                    }
                };
            });
        }

        // ========== TIMER BUTTON ON SET COMPLETE ==========
        function initSetsWithTimer() {
            document.querySelectorAll('.setbtn').forEach(b => {
                b.onclick = () => {
                    b.classList.toggle('done');
                    const c = b.closest('.excard');
                    const all = c.querySelectorAll('.setbtn');
                    const dn = c.querySelectorAll('.setbtn.done');

                    if (all.length === dn.length) {
                        c.classList.add('done');
                        toast('ğŸ’ª Hareket tamam!');
                    } else {
                        c.classList.remove('done');
                        // Set tamamlandÄ±ysa timer aÃ§
                        if (b.classList.contains('done')) {
                            openTimer();
                        }
                    }

                    saveProgress();
                    checkDayDone();
                };
            });
        }

        // Override initSets ve initRest
        function initSets() { initSetsWithTimer(); }
        function initRest() { initRestWithSave(); }

        // ========== INIT ALL NEW FEATURES ==========
        document.addEventListener('DOMContentLoaded', () => {
            initMacros();
            initNotes();
            initWeightTracking();
            initVideoButtons();
            renderMeasureHistory();
            updateStreak();
        });
    </script>
</body>
</html>